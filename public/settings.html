<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-KSHBZ8D1X7"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-KSHBZ8D1X7');
</script>
    <script>
        // Check if about:blank is enabled and if we're not already in an about:blank page
        if (localStorage.getItem('aboutBlank') === 'true' && window.location.href !== 'about:blank') {
            const win = window.open();
            win.document.body.style.margin = '0';
            win.document.body.style.height = '100vh';
            const iframe = win.document.createElement('iframe');
            iframe.style.border = 'none';
            iframe.style.width = '100%';
            iframe.style.height = '100%';
            iframe.style.margin = '0';
            iframe.src = window.location.href;
            win.document.body.appendChild(iframe);
            window.location.replace('about:blank');
        }
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Google</title>
    <link rel="icon" href="/assets/favicon/google.ico">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --background: #111827;
            --navbar: #1f2937;
            --card: #1f2937;
            --text: #ffffff;
            --secondary-text: #9ca3af;
            --accent: #3b82f6;
            --accent-hover: #2563eb;
            --input: #374151;
            --border: #4b5563;
        }

        body {
            background-color: var(--background);
            color: var(--text);
            font-family: 'Inter', sans-serif;
            margin: 0;
            padding: 0;
        }
        .navbar {
            background-color: var(--navbar);
            padding: 16px 24px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        .nav-logo {
            font-size: 1.5rem;
            font-weight: bold;
            color: white;
            text-decoration: none;
        }
        .nav-links {
            display: flex;
            gap: 24px;
        }
        .nav-link {
            color: var(--secondary-text);
            text-decoration: none;
            font-size: 0.9rem;
            transition: color 0.2s;
        }
        .nav-link:hover {
            color: white;
        }
        .container {
            max-width: 800px;
            margin: 40px auto;
            padding: 0 20px;
        }
        .settings-section {
            background: var(--card);
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 24px;
        }
        h2 {
            margin-top: 0;
            margin-bottom: 20px;
            font-size: 1.5rem;
        }
        .setting-group {
            margin-bottom: 24px;
        }
        .setting-group:last-child {
            margin-bottom: 0;
        }
        label {
            display: block;
            margin-bottom: 8px;
            color: #9ca3af;
        }
        select, input[type="text"] {
            width: 100%;
            padding: 8px 12px;
            background: var(--input);
            border: 2px solid var(--border);
            border-radius: 6px;
            color: var(--text);
            font-family: 'Inter', sans-serif;
            font-size: 0.9rem;
            margin-bottom: 16px;
        }
        select:focus, input[type="text"]:focus {
            outline: none;
            border-color: #3b82f6;
        }
        .cloak-preview {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px;
            background: #374151;
            border-radius: 6px;
            margin-top: 16px;
        }
        .cloak-preview img {
            width: 16px;
            height: 16px;
        }
        button {
            background: var(--accent);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-family: 'Inter', sans-serif;
            font-size: 0.9rem;
            transition: background-color 0.2s;
        }
        button:hover {
            background: var(--accent-hover);
        }
        .settings-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 24px;
        }
        
        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #374151;
            transition: .4s;
            border-radius: 24px;
        }
        
        .slider:before {
            position: absolute;
            content: "";
            height: 16px;
            width: 16px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }
        
        input:checked + .slider {
            background-color: #3b82f6;
        }
        
        input:checked + .slider:before {
            transform: translateX(26px);
        }
        
        .setting-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
        }
        
        .setting-description {
            color: var(--secondary-text);
            font-size: 0.9rem;
            margin-bottom: 16px;
        }
        
        .input-group {
            margin-bottom: 16px;
        }
        
        .button-group {
            display: flex;
            gap: 10px;
        }
        
        .secondary-button {
            background: var(--input);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-family: 'Inter', sans-serif;
            font-size: 0.9rem;
            transition: background-color 0.2s;
        }
        
        .secondary-button:hover {
            background: var(--border);
        }
    </style>
</head>
<body>
    <nav class="navbar">
        <a href="index.html" class="nav-logo">Unblocked Games</a>
        <div class="nav-links">
            <a href="index.html" class="nav-link">Games</a>
            <a href="apps.html" class="nav-link">Apps</a>
            <a href="settings.html" class="nav-link">Settings</a>
        </div>
    </nav>
    
    <div class="container">
        <div class="settings-grid">
            <!-- About:Blank Section -->
            <div class="settings-section">
                <div class="setting-header">
                    <h2>About:Blank</h2>
                    <label class="toggle-switch">
                        <input type="checkbox" id="aboutBlankToggle">
                        <span class="slider"></span>
                    </label>
                </div>
                <p class="setting-description">Cloak the site in an about:blank page and toggle about:blank on startup (enabled by default)</p>
                <button class="secondary-button" id="openPopup">Open Popup</button>
            </div>

            <!-- Set Panic Key -->
            <div class="settings-section">
                <h2>Set Panic Key</h2>
                <p class="setting-description">Quick exit site with one press. Used for redirects when about:blank is opened. For multiple key strokes separate them with a comma. Ex. "A,B,C"</p>
                <div class="input-group">
                    <input type="text" id="panicKey" placeholder="Enter key combination">
                </div>
                <input type="text" id="panicUrl" placeholder="https://classroom.google.com/">
                <button class="secondary-button" id="savePanicKey">Save</button>
            </div>

            <!-- Tab Cloaker -->
            <div class="settings-section">
                <h2>Tab Cloaker</h2>
                <p class="setting-description">Change the title and icon of the page.</p>
                <select id="cloakPreset" class="input-group">
                    <option value="default">Default (No Cloak)</option>
                    <option value="google">Google</option>
                    <option value="drive">Google Drive</option>
                    <option value="classroom">Google Classroom</option>
                    <option value="canvas">Canvas</option>
                </select>
                <div class="button-group">
                    <button class="secondary-button" id="saveCloak">Save</button>
                    <button class="secondary-button" id="resetCloak">Reset Cloak</button>
                </div>
            </div>

            <!-- Set Background Image -->
            <div class="settings-section">
                <h2>Set Background Image</h2>
                <p class="setting-description">Change the site's background image.</p>
                <input type="text" id="bgImageUrl" placeholder="Enter image URL" class="input-group">
                <div class="button-group">
                    <button class="secondary-button" id="saveBg">Save</button>
                    <button class="secondary-button" id="resetBg">Reset</button>
                </div>
            </div>

            <!-- Particles -->
            <div class="settings-section">
                <div class="setting-header">
                    <h2>Particles</h2>
                    <label class="toggle-switch">
                        <input type="checkbox" id="particlesToggle">
                        <span class="slider"></span>
                    </label>
                </div>
                <p class="setting-description">Add the particles that are from the previous version to the new site.</p>
            </div>

            <!-- Themes -->
            <div class="settings-section">
                <h2>Themes!</h2>
                <p class="setting-description">Pick from a variety of themes to customize your experience.</p>
                <select id="themeChoice" class="input-group">
                    <option value="default">Default Theme</option>
                    <option value="dark">Dark Theme</option>
                    <option value="light">Light Theme</option>
                    <option value="custom">Custom Theme</option>
                </select>
            </div>
        </div>
    </div>

    <script>
        // Tab Cloaking
        const cloakPresetSelect = document.getElementById('cloakPreset');
        const saveCloak = document.getElementById('saveCloak');
        const resetCloak = document.getElementById('resetCloak');

        function updateFavicon(preset) {
            let faviconPath = '/assets/favicon/google.ico';
            let pageTitle = 'Google';

            switch (preset) {
                case 'drive':
                    faviconPath = '/assets/favicon/drive.ico';
                    pageTitle = 'Google Drive';
                    break;
                case 'classroom':
                    faviconPath = '/assets/favicon/classroom.ico';
                    pageTitle = 'Google Classroom';
                    break;
                case 'canvas':
                    faviconPath = '/assets/favicon/canvas.ico';
                    pageTitle = 'Canvas';
                    break;
                case 'default':
                    faviconPath = '/assets/favicon/google.ico';
                    pageTitle = 'Google';
                    break;
            }

            // Update favicon
            const links = document.querySelectorAll('link[rel="icon"]');
            links.forEach(link => link.remove());
            const newLink = document.createElement('link');
            newLink.rel = 'icon';
            newLink.href = faviconPath;
            document.head.appendChild(newLink);

            // Update title
            document.title = pageTitle;
        }

        saveCloak.addEventListener('click', () => {
            const preset = cloakPresetSelect.value;
            let pageTitle;
            
            switch (preset) {
                case 'google':
                    pageTitle = 'Google';
                    break;
                case 'drive':
                    pageTitle = 'Google Drive';
                    break;
                case 'classroom':
                    pageTitle = 'Google Classroom';
                    break;
                case 'canvas':
                    pageTitle = 'Canvas';
                    break;
                default:
                    pageTitle = 'Updaown\'s UBL';
            }
            
            const settings = {
                cloakPreset: preset,
                pageTitle: pageTitle
            };
            
            localStorage.setItem('siteSettings', JSON.stringify(settings));
            updateFavicon(preset);
            alert('Cloak settings saved!');
        });

        resetCloak.addEventListener('click', () => {
            localStorage.removeItem('siteSettings');
            cloakPresetSelect.value = 'default';
            updateFavicon('default');
            alert('Cloak settings reset!');
        });

        // About:Blank functionality
        const aboutBlankToggle = document.getElementById('aboutBlankToggle');
        const openPopupButton = document.getElementById('openPopup');

        aboutBlankToggle.addEventListener('change', () => {
            localStorage.setItem('aboutBlank', aboutBlankToggle.checked);
        });

        openPopupButton.addEventListener('click', () => {
            const win = window.open();
            win.document.body.style.margin = '0';
            win.document.body.style.height = '100vh';
            const iframe = win.document.createElement('iframe');
            iframe.style.border = 'none';
            iframe.style.width = '100%';
            iframe.style.height = '100%';
            iframe.style.margin = '0';
            iframe.src = window.location.href;
            win.document.body.appendChild(iframe);
        });

        // Background Image
        const bgImageUrl = document.getElementById('bgImageUrl');
        const saveBg = document.getElementById('saveBg');
        const resetBg = document.getElementById('resetBg');

        saveBg.addEventListener('click', () => {
            const url = bgImageUrl.value;
            localStorage.setItem('backgroundImage', url);
            document.body.style.backgroundImage = `url(${url})`;
            alert('Background image saved!');
        });

        resetBg.addEventListener('click', () => {
            localStorage.removeItem('backgroundImage');
            document.body.style.backgroundImage = 'none';
            bgImageUrl.value = '';
            alert('Background image reset!');
        });

        // Particles Toggle
        const particlesToggle = document.getElementById('particlesToggle');
        
        particlesToggle.addEventListener('change', () => {
            localStorage.setItem('particles', particlesToggle.checked);
            if (particlesToggle.checked) {
                initParticles();
            } else {
                destroyParticles();
            }
        });

        // Theme Selection
        const themeChoice = document.getElementById('themeChoice');
        
        themeChoice.addEventListener('change', () => {
            const selectedTheme = themeChoice.value;
            localStorage.setItem('theme', selectedTheme);
            applyTheme(selectedTheme);
        });

        // Load all settings on page load
        window.addEventListener('load', () => {
            // Load about:blank setting
            const aboutBlank = localStorage.getItem('aboutBlank') === 'true';
            aboutBlankToggle.checked = aboutBlank;

            // Load panic key settings
            const panicKey = localStorage.getItem('panicKey');
            const panicUrl = localStorage.getItem('panicUrl');
            if (panicKey) document.getElementById('panicKey').value = panicKey;
            if (panicUrl) document.getElementById('panicUrl').value = panicUrl;

            // Load background image
            const bgImage = localStorage.getItem('backgroundImage');
            if (bgImage) {
                bgImageUrl.value = bgImage;
                document.body.style.backgroundImage = `url(${bgImage})`;
            }

            // Load particles setting
            const particles = localStorage.getItem('particles') === 'true';
            particlesToggle.checked = particles;
            if (particles) {
                initParticles();
            }

            // Load theme setting
            const theme = localStorage.getItem('theme');
            if (theme) {
                themeChoice.value = theme;
                applyTheme(theme);
            }
        });
    </script>
    <script>
        // Apply saved settings
        const applySettings = () => {
            const settings = JSON.parse(localStorage.getItem('siteSettings') || '{}');
            
            // Set default title if no settings exist
            document.title = settings.pageTitle || 'Google';
            
            // Set default favicon if no settings exist
            const faviconPath = settings.cloakPreset ? {
                'google': 'assets/favicon/google.ico',
                'drive': 'assets/favicon/drive.ico',
                'classroom': 'assets/favicon/classroom.ico',
                'canvas': 'assets/favicon/canvas.ico'
            }[settings.cloakPreset] : 'assets/favicon/google.ico';

            const links = document.querySelectorAll('link[rel="icon"]');
            links.forEach(link => link.remove());
            const newLink = document.createElement('link');
            newLink.rel = 'icon';
            newLink.href = faviconPath;
            document.head.appendChild(newLink);
        };
        
        // Apply settings when page loads
        document.addEventListener('DOMContentLoaded', applySettings);
    </script>
</body>
</html> 